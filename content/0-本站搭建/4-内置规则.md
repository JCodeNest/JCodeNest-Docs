---
title: 内置规则
summary: 本站内置规则约定说明
date: 2025-09-20
cover: https://jcodenest-oss.oss-cn-shanghai.aliyuncs.com/images/20250920140521425.png
---

# 内置规则

## 一、目录结构

- `content`：文章内容，Markdown 格式。
- `app`：应用逻辑，包含页面布局、数据获取、API 调用等。 
- `components`：通用组件，可复用的 UI 组件。
- `data`：数据源，包含视频资源、分类与标签等。
- `config`：站点配置，包含站点信息、导航与文案、站长信息、SEO 与图标等。

## Markdown 元信息

建议在每篇文章的头部添加以下元信息，以便于站点生成与 SEO。

```yaml
---
title: 文章标题
summary: 文章摘要，用于站点列表与搜索。
date: 2025-09-20
cover: https://jcodenest-oss.oss-cn-shanghai.aliyuncs.com/images/20250920140521425.png
password: false
---
```

> ::tip 文档加密
>
> 如果需要给文章设置密码，可以在文章头部添加 `password: true / false`，如果为 `true`，则文章内容需要通过密码验证才能查看。对应的解密密码配置在 `config/site.ts` 中的 `security.docPassword`。

上述信息将会在首页的随机文章卡片上进行渲染展示：

![](https://jcodenest-oss.oss-cn-shanghai.aliyuncs.com/images/20250921202343048.png)

---

## 二、全局站点配置（config/site.ts）

### 2.1 基础信息（站点与首页）

- 字段：name、subtitle、logo.src、home.heroTitle、home.heroDescription
- 用途：站点头部/侧边栏展示、首页 Hero 文案
- 影响范围：components/app-sidebar.tsx、components/background-lines.tsx

![](https://jcodenest-oss.oss-cn-shanghai.aliyuncs.com/images/20250921202719647.png)

代码片段：

```ts
// 站点名称与副标题
name: "JcodeNest Document",
subtitle: "A Backend Engineer",
// Logo
logo: { src: "/logo.svg" },
// 首页展示信息
home: {
  heroTitle: "JCodeNest Docs",
  heroDescription: "现代化的技术文档平台，助你构建完整的知识体系",
},
```

### 2.2 导航与文案（面包屑与侧边栏外链）

- 字段：breadcrumb.rootLabel/currentLabel/rootHref、navSecondary[]
- 用途：页面顶部面包屑文案、侧边栏外链入口
- 影响范围：app/page.tsx、components/app-sidebar.tsx

![](https://jcodenest-oss.oss-cn-shanghai.aliyuncs.com/images/20250921202832172.png)

代码片段：

```ts
// 面包屑
breadcrumb: {
  rootLabel: "JCodeNest 文档",
  currentLabel: "首页",
  rootHref: "#",
},
// 外链导航（图标使用字符串名称，在组件内映射到 Lucide 图标）
navSecondary: [
  { title: "Github", url: "https://github.com/JCodeNest/JCodeNest-Docs", icon: "Github" },
  { title: "反馈", url: "https://github.com/JCodeNest/JCodeNest-Docs/issues/new", icon: "MessageSquare" },
],
```

站点使用的是 [Lucide 图标](https://lucide.dev/icons/)，可以在官网选取自己喜欢的图标。

![](https://jcodenest-oss.oss-cn-shanghai.aliyuncs.com/images/20250921203106962.png)

### 2.3 站长信息（用户信息）

- 字段：user.name/email/avatar
- 用途：侧边栏底部用户卡片
- 影响范围：components/app-sidebar.tsx

![](https://jcodenest-oss.oss-cn-shanghai.aliyuncs.com/images/20250921203259372.png)

代码片段：

```ts
user: {
  name: "沉默的老李",
  email: "jcodenest@gmail.com",
  avatar: "/avatars/avatar.png",
},
```

### 2.4 SEO 与图标（Meta 注入）

- 字段：seo.title/description/keywords/authors/themeColor/siteUrl/openGraph/twitter/icons.favicon
- 用途：Next Metadata API 注入页面头部，提升 SEO；favicon 路径集中配置
- 影响范围：app/layout.tsx

![](https://jcodenest-oss.oss-cn-shanghai.aliyuncs.com/images/20250921203436501.png)

代码片段：

```ts
seo: {
  title: "JCodeNest 文档",
  description: "现代化的技术文档平台，助你构建完整的知识体系。",
  keywords: ["JCodeNest", "技术文档", "Java", "后端", "编程", "知识库"],
  authors: [{ name: "沉默的老李", url: "https://github.com/JCodeNest" }],
  themeColor: "#0ea5e9",
  siteUrl: "https://docs.jcodenest.com",
  openGraph: {
    title: "JCodeNest 文档",
    description: "现代化的技术文档平台，助你构建完整的知识体系。",
    url: "https://docs.jcodenest.com",
    siteName: "JCodeNest Docs",
    images: [{ url: "/og.png", width: 1200, height: 630, alt: "JCodeNest Docs" }],
    locale: "zh_CN",
    type: "website",
  },
  twitter: {
    card: "summary_large_image",
    site: "@JCodeNest",
    creator: "@JCodeNest",
  },
  icons: { favicon: "/favicon.ico" },
},
```

使用建议：
- favicon 文件保留在 app/favicon.ico，更换仅需改 siteConfig.seo.icons.favicon。
- 可在后续扩展 canonical/robots 等字段，由 layout.tsx 读取注入。

---

## 三、视频学习数据维护规则（data/video-resources.ts）

本站支持三种视频来源：直接上传、YouTube 和 Bilibili。

![](https://jcodenest-oss.oss-cn-shanghai.aliyuncs.com/images/20250921203606642.png)

### 3.1 结构与类型

核心类型定义（节选）：

```ts
export type VideoPlatform = "direct" | "youtube" | "bilibili";
export interface BilibiliMeta {
  bvid?: string; aid?: string; cid?: string; page?: number;
  rawIframeSrc?: string; // 若提供官方 iframe 的 src，将优先使用
}
export interface VideoResource {
  id: string;
  title: string;
  description?: string;
  categories: string[];
  tags: string[];
  platform: VideoPlatform;
  thumbnail?: string;
  originalUrl?: string;
  publishedAt?: string;
  source:
    | { type: "embed"; url: string }
    | { type: "file"; url: string }
    | { type: "bilibili"; meta: BilibiliMeta };
}
```

### 3.2 字段约束与约定

- id：必填，全局唯一；推荐短横线风格（如 `java-8`）。
- title：必填；description：可选，用于摘要与检索。
- categories/tags：各至少一个；页面会自动汇总生成 VIDEO_CATEGORIES/VIDEO_TAGS。
- platform/source：
  - youtube：使用 `source.type="embed"` 提供 `https://www.youtube.com/embed/{id}`。
  - bilibili：使用 `source.type="bilibili"` 并在 meta 中提供 `bvid`；如有 `rawIframeSrc` 优先。
  - direct：使用 `source.type="file"`，前端以 `<video>` 播放。
- thumbnail：可选；YouTube 自动推断；B站在可见列表中自动补齐封面与时长。
- originalUrl/publishedAt：建议填写，便于跳转与排序扩展。

### 3.3 新增条目示例

![](https://jcodenest-oss.oss-cn-shanghai.aliyuncs.com/images/20250921203810701.png)

```ts
export const videoResources: VideoResource[] = [
  // ...已有条目
  {
    id: "spring-boot-quickstart",
    title: "Spring Boot 快速上手",
    description: "零基础入门 Spring Boot，构建你的第一个应用。",
    categories: ["Java", "Spring"],
    tags: ["入门", "Spring Boot", "实战"],
    platform: "youtube",
    originalUrl: "https://www.youtube.com/embed/XXXXXXXXXXX",
    source: { type: "embed", url: "https://www.youtube.com/embed/XXXXXXXXXXX" },
  },
];
```

### 3.4 工具函数与自动补齐

- getEmbedSrc(resource)：返回可播放 iframe 的 src（direct 返回空字符串，走 video 播放）。
- getThumbnailSrc(resource)：若未提供 thumbnail，针对 YouTube 自动生成封面。
- 前端会对 B 站视频在可见列表中请求 `/api/video-meta/bilibili` 自动补齐封面与时长。

### 3.5 常见问题与建议

- 使用 https 避免混合内容。
- B 站多 P，请设置 meta.page。
- 标签建议 3-8 个，页面默认展示前 4 个。
- 修改资源后无需维护分类/标签汇总，页面自动更新。